import{u as g,r,j as e,L as p,O as f}from"./vendor_react-ByBjJ8Oe.js";import{A as h}from"./index-rf0MYcdn.js";import"./vendor-DuPUYBON.js";import"./vendor_firebase-kU5F968d.js";const N=[{sortOrder:1,name:"Dashboard",icon:"",link:"/"},{sortOrder:8,name:"Tasks",icon:"",link:"/task"},{sortOrder:16,name:"Calendar",icon:"",link:"/calendar"},{sortOrder:24,name:"Settings",icon:"",link:"/settings"},{sortOrder:99,name:"Logout",icon:"",action:"logout"}];function k({photoURL:i,name:l,size:a=80,bgColor:o="#667eea"}={}){return i||`https://ui-avatars.com/api/?name=${encodeURIComponent(l||"User")}&background=${o.replace("#","")}&color=fff&size=${a}`}function v({children:i}){const l=g(),[a,o]=r.useState(!1),[t,c]=r.useState(null),[O,d]=r.useState(null),[x,u]=r.useState(null);r.useEffect(()=>{const s=h.onAuthStateChanged(n=>{n?(c(n.displayName||n.email||"User"),d(n.email||""),u(n.photoURL||null)):(c(null),d(null),u(null))});return()=>s()},[]);const b=async()=>{try{await h.signOutUser(),l("/login")}catch(s){console.error("Logout failed:",s)}},j=()=>{o(!a)},m=()=>{o(!1)};return e.jsxs(e.Fragment,{children:[e.jsx("button",{className:`hamburger-btn ${a?"hamburger-open":""}`,onClick:j,"aria-expanded":a,"aria-label":a?"Close sidebar":"Open sidebar",children:e.jsx("i",{className:"bi bi-list"})}),a&&e.jsx("div",{className:"sidebar-overlay",onClick:m}),e.jsxs("aside",{className:`sidebar ${a?"sidebar-open":""}`,children:[e.jsxs("div",{className:"sidebar-header",children:[e.jsx("h2",{children:"Tasky"}),e.jsxs("div",{className:"user-profile",children:[e.jsx("div",{className:"user-avatar",children:e.jsx("img",{id:"userPhoto",src:k({photoURL:x,name:t||"User",size:80,bgColor:"#3498db"}),alt:"Profile"})}),e.jsx("div",{className:"user-info",children:e.jsx("h5",{id:"userName",children:t??"Loading..."})})]})]}),e.jsx("ul",{children:N.map(s=>e.jsx("li",{children:s.link?e.jsxs(p,{to:s.link,onClick:m,children:[s.icon&&e.jsx("span",{className:"material-icons",children:s.icon}),s.name]}):s.action==="logout"?e.jsxs("button",{onClick:b,className:"logout-btn",children:[s.icon&&e.jsx("span",{className:"material-icons",children:s.icon}),s.name]}):null},s.link||s.action))}),i]})]})}function y(){return e.jsxs("div",{className:"main-layout-container",children:[e.jsx(v,{}),e.jsx("main",{className:"main-content",children:e.jsx(f,{})})]})}export{y as default};
