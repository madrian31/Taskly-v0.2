import{d as t}from"./index-DnoBwBuG.js";import{c,d,e as a,f as u,h as p,t as l,u as m,j as y,v as n}from"./vendor_firebase-i8bcTDRB.js";function i(o,e){return{id:o,uid:e.uid??e.authUid??void 0,displayName:e.displayName??e.name,email:e.email,photoURL:e.photoURL,role:e.role??"user",department:e.department,status:e.status,lastActive:e.lastActive,createdAt:e.createdAt?.seconds?e.createdAt.seconds*1e3:e.createdAt??Date.now()}}class A{constructor(){this.col=c(t,"users")}async getAll(){return(await d(this.col)).docs.map(s=>i(s.id,s.data()))}async getById(e){const s=a(t,"users",e),r=await u(s);return r.exists()?i(r.id,r.data()):null}async create(e){return(await p(c(t,"users"),{...e,createdAt:e.createdAt??Date.now()})).id}async upsertByUid(e,s){const r=a(t,"users",e);await l(r,{...s,uid:e,updatedAt:n(),createdAt:n()},{merge:!0})}async update(e,s){await m(a(t,"users",e),s)}async delete(e){await y(a(t,"users",e))}}const f=new A;export{f as U};
