import{r as d,j as e,S as De,F as Ie,P as V,C as de,b as ce,d as Ue,e as Pe,f as pe,g as ue,E as me,h as he,T as xe,i as Re,k as fe,D as Ae,l as ge,I as Me,m as Le,n as $e}from"./vendor_react-CrYXpBy-.js";/* empty css            */import{d as b,S as Be}from"./index-BG59pEu1.js";import{c as qe,d as Q,q as We,w as Oe,e as I,f as Ve,T as v,h as Qe,u as je,j as Ge,k as He,r as ke,l as Xe,m as Je,n as Ke}from"./vendor_firebase-kU5F968d.js";import"./vendor-DuPUYBON.js";class Ye{constructor(){this.ref=qe(b,"tasks")}async getAllTasks(){return(await Q(this.ref)).docs.map(a=>({id:a.id,...a.data()}))}async getMainTasks(){return(await Q(this.ref)).docs.map(a=>({id:a.id,...a.data()})).filter(a=>a.parent_id===null||a.parent_id===void 0)}async getSubTasks(t){const a=We(this.ref,Oe("parent_id","==",t));return(await Q(a)).docs.map(l=>({id:l.id,...l.data()}))}async getTaskById(t){const a=I(b,"tasks",t),o=await Ve(a);return o.exists()?{id:o.id,...o.data()}:null}async createTask(t){if(t.priority<1||t.priority>4)throw new Error("Priority must be between 1 and 4");const a=v.now();await Qe(this.ref,{task_name:t.task_name,description:t.description??null,parent_id:t.parent_id??null,status:t.status??"todo",priority:t.priority,due_date:t.due_date?v.fromDate(t.due_date):null,created_at:a,updated_at:a,completed_at:t.status==="done"?a:null})}async updateStatus(t,a){if(!["todo","in_progress","blocked","done"].includes(a))throw new Error("Invalid status value");const o=v.now(),l=I(b,"tasks",t);await je(l,{status:a,updated_at:o,completed_at:a==="done"?o:null})}async updateTask(t,a){const o=v.now(),l=I(b,"tasks",t),p={...a,updated_at:o};a.due_date&&(p.due_date=v.fromDate(a.due_date)),Object.keys(p).forEach(h=>{p[h]===void 0&&delete p[h]}),await je(l,p)}async deleteTask(t){await Ge(I(b,"tasks",t))}}class Ze{constructor(t,a){this.taskRepository=t,this.fileUploadService=a}async completeTask(t){await this.taskRepository.updateStatus(t,"done")}async reopenTask(t){await this.taskRepository.updateStatus(t,"todo")}async updateStatus(t,a){await this.taskRepository.updateStatus(t,a)}async deleteTask(t){await this.taskRepository.deleteTask(t)}async uploadTaskFiles(t){if(!this.fileUploadService)throw new Error("FileUploadService is not configured");try{return(await this.fileUploadService.uploadMultipleFiles(t)).map((o,l)=>({id:`attachment_${Date.now()}_${l}`,fileName:o.fileName,fileUrl:o.fileUrl,fileType:o.fileType,uploadedAt:o.uploadedAt}))}catch(a){throw console.error("Error uploading task files:",a),a}}async removeTaskAttachment(t,a,o){try{this.fileUploadService&&await this.fileUploadService.deleteFile(o.fileUrl);const l=await this.taskRepository.getTaskById(t);if(!l)throw new Error("Task not found");const p=l.attachments?.filter(h=>h.id!==a);await this.taskRepository.updateTask(t,{attachments:p})}catch(l){throw console.error("Error removing task attachment:",l),l}}isImageFile(t){if(!this.fileUploadService){const a=["jpg","jpeg","png","gif","webp"],o=t.name.split(".").pop()?.toLowerCase()||"";return t.type.startsWith("image/")||a.includes(o)}return this.fileUploadService.isImageFile(t)}}class es{constructor(){this.storage=He(),this.imageExtensions=["jpg","jpeg","png","gif","webp","svg","bmp","ico"],this.maxFileSize=10*1024*1024}isImageFile(t){const a=t.type.toLowerCase(),l=t.name.toLowerCase().split(".").pop()||"";return a.startsWith("image/")?!0:this.imageExtensions.includes(l)}getUploadPath(t){return this.isImageFile(t)?"images":"files"}validateFileSize(t){if(t.size>this.maxFileSize)throw new Error(`File ${t.name} exceeds maximum size of 10MB`)}generateUniqueFileName(t){const a=Date.now(),o=Math.random().toString(36).substring(7),l=t.name.split(".").pop()||"";return`${a}_${o}.${l}`}async uploadFile(t){try{this.validateFileSize(t);const a=this.getUploadPath(t),o=this.generateUniqueFileName(t),l=`attachements/${a}/${o}`,p=ke(this.storage,l);await Xe(p,t);const h=await Je(p);return{fileName:t.name,fileUrl:h,fileType:t.type,uploadPath:a,uploadedAt:new Date}}catch(a){throw console.error("Error uploading file:",a),new Error(`Failed to upload ${t.name}: ${a.message}`)}}async uploadMultipleFiles(t){try{const a=[];for(const o of t){const l=await this.uploadFile(o);a.push(l)}return a}catch(a){throw console.error("Error uploading multiple files:",a),a}}async deleteFile(t){try{const a=t.split("/o/")[1];if(!a)throw new Error("Invalid file URL");const o=decodeURIComponent(a.split("?")[0]),l=ke(this.storage,o);await Ke(l)}catch(a){throw console.error("Error deleting file:",a),new Error(`Failed to delete file: ${a.message}`)}}}const w=new Ye,G=new es,ye=new Ze(w,G);function ls(){const[N,t]=d.useState([]),[a,o]=d.useState({}),[l,p]=d.useState(!0),[h,U]=d.useState(!1),[be,H]=d.useState(!1),[m,S]=d.useState(!1),[X,T]=d.useState(null),[P,ve]=d.useState("all"),[R,we]=d.useState(""),[Ne,Se]=d.useState(new Set),[C,J]=d.useState(null),[_,A]=d.useState(null),[c,M]=d.useState({task_name:"",description:"",priority:3,status:"todo",due_date:""}),[Te,F]=d.useState(!1),[j,k]=d.useState([]),[x,z]=d.useState([]),[f,K]=d.useState(!1);d.useEffect(()=>{L()},[]);async function L(){try{p(!0),console.log("Loading tasks from Firestore...");const s=await w.getMainTasks();console.log("Main tasks loaded:",s),t(s);const i={};for(const n of s)if(n.id){const u=await w.getSubTasks(n.id);i[n.id]=u}o(i)}catch(s){console.error("Error loading tasks:",s),alert("Error loading tasks: "+s.message)}finally{p(!1)}}async function Y(s){try{await ye.deleteTask(s),await L()}catch(i){console.error("Error deleting task:",i),alert("Error deleting task: "+i.message)}}function $(s){M({task_name:"",description:"",priority:3,status:"todo",due_date:""}),F(!1),A(null),k([]),z([]),s?(S(!0),T(s)):(S(!1),T(null)),U(!0)}function E(){U(!1),F(!1),S(!1),T(null),A(null),k([]),z([])}function Z(s){M({task_name:s.task_name||"",description:s.description||"",priority:s.priority||2,status:s.status||"todo",due_date:s.due_date?s.due_date.seconds?new Date(s.due_date.seconds*1e3).toISOString().slice(0,10):new Date(s.due_date).toISOString().slice(0,10):""}),A(s.id||null),S(s.parent_id!==null&&s.parent_id!==void 0),T(s.parent_id??null),z(s.attachments||[]),k([]),U(!0)}function B(){H(!1)}function y(s){const{name:i,value:n}=s.target;M(u=>({...u,[i]:n}))}function Ce(s){const i=s.target.files;if(i){const n=Array.from(i);k(u=>[...u,...n])}}function _e(s){k(i=>i.filter((n,u)=>u!==s))}function ee(s){z(i=>i.filter(n=>n.id!==s))}function D(s){return["image/jpeg","image/png","image/gif","image/webp","image/svg+xml"].includes(s.fileType.toLowerCase())}function Fe(s){Se(i=>{const n=new Set(i);return n.has(s)?n.delete(s):n.add(s),n})}function se(s){J(i=>i===s?null:s)}function g(){J(null)}d.useEffect(()=>{function s(){g()}return document.addEventListener("click",s),()=>document.removeEventListener("click",s)},[]);function te(){let s=N;if(P!=="all"&&(s=s.filter(i=>{switch(P){case"todo":return i.status==="todo";case"in_progress":return i.status==="in_progress";case"done":return i.status==="done";default:return!0}})),R.trim()){const i=R.toLowerCase();s=s.filter(n=>n.task_name.toLowerCase().includes(i)||n.description&&n.description.toLowerCase().includes(i))}return s}function ae(s){switch(s){case"todo":return{icon:ce,color:"text-slate-400"};case"in_progress":return{icon:de,color:"text-blue-500"};case"done":return{icon:$e,color:"text-emerald-500"};default:return{icon:Le,color:"text-red-500"}}}function ie(s){switch(s){case 1:return{color:"text-slate-400",text:"P4"};case 2:return{color:"text-blue-500",text:"P3"};case 3:return{color:"text-orange-500",text:"P2"};case 4:return{color:"text-red-500",text:"P1"};default:return{color:"text-slate-400",text:"P4"}}}function oe(s){if(!s)return"No date";const i=s;return(i.seconds?new Date(i.seconds*1e3):new Date(s)).toLocaleDateString("en-US",{month:"short",day:"numeric"})}async function ne(s){if(s&&s.preventDefault&&s.preventDefault(),F(!0),!(!c.task_name||c.task_name.trim()===""))try{K(!0);let i=[...x];if(j.length>0){const u=await ye.uploadTaskFiles(j);i=[...x,...u]}const n={task_name:c.task_name.trim(),description:c.description.trim()||void 0,status:c.status,priority:Number(c.priority),due_date:c.due_date?new Date(c.due_date):void 0,parent_id:m&&X?X:void 0,attachments:i.length>0?i:void 0};console.log("Submitting task:",n),_?(await w.updateTask(_,n),console.log("Task updated successfully!")):(await w.createTask(n),console.log("Task created successfully!")),await L(),console.log("Tasks reloaded"),F(!1),E(),H(!0)}catch(i){console.error("Error adding task from modal:",i),alert("Failed to add task: "+i.message+`

Check console for details.`)}finally{K(!1)}}return e.jsxs(Be,{id:"task",children:[e.jsxs("div",{className:"task-header-section",children:[e.jsxs("div",{className:"header-content",children:[e.jsxs("div",{className:"header-left",children:[e.jsx("h1",{className:"header-title",children:"Tasks"}),e.jsx("p",{className:"header-subtitle",children:"Manage your tasks effectively with Taskly"})]}),e.jsxs("div",{className:"header-right",children:[e.jsxs("div",{className:"search-container",children:[e.jsx(De,{className:"search-icon",size:20}),e.jsx("input",{type:"text",placeholder:"Search tasks...",className:"search-input",value:R,onChange:s=>we(s.target.value)})]}),e.jsx("button",{className:"filter-button",children:e.jsx(Ie,{size:20})}),e.jsxs("button",{className:"new-task-button",onClick:()=>$(),children:[e.jsx(V,{size:20}),"New Task"]})]})]}),e.jsx("div",{className:"filter-tabs",children:[{key:"all",label:"All Tasks"},{key:"todo",label:"To Do"},{key:"in_progress",label:"In Progress"},{key:"done",label:"Done"}].map(s=>e.jsx("button",{className:`filter-tab ${P===s.key?"active":""}`,onClick:()=>ve(s.key),children:s.label},s.key))})]}),e.jsx("div",{className:"task-list-container",children:l?e.jsxs("div",{className:"loading-state",children:[e.jsx(de,{className:"animate-spin",size:24}),e.jsx("p",{children:"Loading tasks..."})]}):te().length===0?e.jsxs("div",{className:"empty-state",children:[e.jsx(ce,{size:48,className:"text-slate-300"}),e.jsx("h3",{children:"No tasks found"}),e.jsx("p",{children:"Get started by creating your first task!"}),e.jsxs("button",{className:"empty-state-button",onClick:()=>$(),children:[e.jsx(V,{size:20}),"Create Task"]})]}):e.jsx("div",{className:"tasks-list",children:te().map(s=>{const i=s.id?a[s.id]||[]:[],n=i.length>0,u=s.id?Ne.has(s.id):!1,le=ae(s.status),q=ie(s.priority),ze=le.icon;return e.jsxs("div",{className:"task-row-container",children:[e.jsxs("div",{className:"task-row",children:[e.jsx("button",{className:"expand-button",onClick:()=>s.id&&n&&Fe(s.id),disabled:!n,children:n?u?e.jsx(Ue,{size:16,className:"text-slate-500"}):e.jsx(Pe,{size:16,className:"text-slate-500"}):e.jsx("div",{className:"w-4 h-4"})}),e.jsxs("div",{className:"task-content",children:[e.jsx("div",{className:"task-title-row",children:e.jsx("h3",{className:"task-title",children:s.task_name})}),s.description&&e.jsx("p",{className:"task-description",children:s.description})]}),e.jsxs("div",{className:"status-badge",children:[e.jsx(ze,{size:16,className:le.color}),e.jsx("span",{className:"status-text",children:s.status.replace("_"," ")})]}),e.jsxs("div",{className:"priority-badge",children:[e.jsx(pe,{size:16,className:q.color}),e.jsx("span",{className:`priority-text ${q.color}`,children:q.text})]}),e.jsxs("div",{className:"due-date",children:[e.jsx(ue,{size:16,className:"text-slate-500"}),e.jsx("span",{className:"due-date-text",children:oe(s.due_date)})]}),e.jsx("div",{className:"task-actions-dropdown",children:e.jsxs("div",{style:{position:"relative"},children:[e.jsx("button",{className:"more-actions-button",onClick:r=>{r.stopPropagation(),s.id&&se(s.id)},"aria-expanded":C===s.id,children:e.jsx(me,{size:16,className:"text-slate-500"})}),C===s.id&&e.jsxs("div",{className:"dropdown-menu",onClick:r=>r.stopPropagation(),children:[(s.parent_id===null||s.parent_id===void 0)&&e.jsxs("div",{className:"dropdown-item",onClick:()=>{g(),s.id&&$(s.id)},children:[e.jsx(V,{size:14}),e.jsx("span",{children:"Add Subtask"})]}),e.jsxs("div",{className:"dropdown-item",onClick:()=>{g(),Z(s)},children:[e.jsx(he,{size:14}),e.jsx("span",{children:"Edit Task"})]}),e.jsxs("div",{className:"dropdown-item delete",onClick:()=>{g(),s.id&&Y(s.id)},children:[e.jsx(xe,{size:14}),e.jsx("span",{children:"Delete Task"})]})]})]})})]}),n&&u&&e.jsxs("div",{className:"subtasks-container",children:[e.jsx("div",{className:"connector-line"}),i.map((r,ss)=>{const re=ae(r.status),W=ie(r.priority),Ee=re.icon;return e.jsxs("div",{className:"subtask-row",children:[e.jsx("div",{className:"horizontal-connector"}),e.jsxs("div",{className:"subtask-card",children:[e.jsx("div",{className:"expand-button-placeholder"}),e.jsxs("div",{className:"task-content",children:[e.jsx("div",{className:"task-title-row",children:e.jsx("h4",{className:"subtask-title",children:r.task_name})}),r.description&&e.jsx("p",{className:"task-description",children:r.description})]}),e.jsxs("div",{className:"status-badge",children:[e.jsx(Ee,{size:16,className:re.color}),e.jsx("span",{className:"status-text",children:r.status.replace("_"," ")})]}),e.jsxs("div",{className:"priority-badge",children:[e.jsx(pe,{size:16,className:W.color}),e.jsx("span",{className:`priority-text ${W.color}`,children:W.text})]}),e.jsxs("div",{className:"due-date",children:[e.jsx(ue,{size:16,className:"text-slate-500"}),e.jsx("span",{className:"due-date-text",children:oe(r.due_date)})]}),e.jsx("div",{className:"task-actions-dropdown",children:e.jsxs("div",{style:{position:"relative"},children:[e.jsx("button",{className:"more-actions-button",onClick:O=>{O.stopPropagation(),r.id&&se(r.id)},"aria-expanded":C===r.id,children:e.jsx(me,{size:16,className:"text-slate-500"})}),C===r.id&&e.jsxs("div",{className:"dropdown-menu",onClick:O=>O.stopPropagation(),children:[e.jsxs("div",{className:"dropdown-item",onClick:()=>{g(),Z(r)},children:[e.jsx(he,{size:14}),e.jsx("span",{children:"Edit Task"})]}),e.jsxs("div",{className:"dropdown-item delete",onClick:()=>{g(),r.id&&Y(r.id)},children:[e.jsx(xe,{size:14}),e.jsx("span",{children:"Delete Task"})]})]})]})})]})]},r.id)})]})]},s.id)})})}),h&&e.jsx("div",{className:"task-modal-overlay",onClick:E,children:e.jsxs("div",{className:"task-modal",onClick:s=>s.stopPropagation(),children:[e.jsxs("div",{className:"task-modal-header",children:[e.jsx("h2",{className:"task-modal-title",children:_?m?"Edit Subtask":"Edit Task":m?"Add New Subtask":"Add New Task"}),e.jsx("button",{className:"task-modal-close-btn",type:"button",onClick:E,"aria-label":"Close modal",children:"×"})]}),e.jsx("div",{className:"task-modal-body",children:e.jsxs("form",{id:"taskForm",onSubmit:ne,children:[e.jsxs("div",{className:"task-form-group",children:[e.jsxs("label",{className:"task-form-label",children:[m?"Subtask Name":"Task Name",e.jsx("span",{style:{color:"#dc2626"},children:"*"})]}),e.jsx("input",{type:"text",className:"task-input-field",name:"task_name",id:"taskName",placeholder:m?"Enter subtask name":"Enter task name",value:c.task_name,onChange:y,required:!0}),e.jsx("div",{className:"task-error-message",id:"taskNameError",style:{display:Te&&!c.task_name?"block":"none"},children:m?"Subtask name is required":"Task name is required"})]}),e.jsxs("div",{className:"task-form-group",children:[e.jsx("label",{className:"task-form-label",children:"Description"}),e.jsx("textarea",{className:"task-input-field",id:"taskDescription",name:"description",placeholder:"Add a description (optional)",value:c.description,onChange:y})]}),e.jsxs("div",{className:"task-form-row",children:[e.jsxs("div",{className:"task-form-group",children:[e.jsx("label",{className:"task-form-label",children:"Status"}),e.jsxs("select",{className:"task-input-field",id:"taskStatus",name:"status",value:c.status,onChange:y,children:[e.jsx("option",{value:"todo",children:"Todo"}),e.jsx("option",{value:"in_progress",children:"In Progress"}),e.jsx("option",{value:"done",children:"Done"})]})]}),e.jsxs("div",{className:"task-form-group",children:[e.jsxs("label",{className:"task-form-label task-priority-label-header",children:["Priority",e.jsx("span",{className:"task-info-icon",children:"i"})]}),e.jsxs("select",{className:"task-input-field",id:"taskPriority",name:"priority",value:c.priority,onChange:y,children:[e.jsx("option",{value:1,children:"Low"}),e.jsx("option",{value:2,children:"Medium"}),e.jsx("option",{value:3,children:"High"}),e.jsx("option",{value:4,children:"Urgent"})]})]})]}),e.jsxs("div",{className:"task-form-group",children:[e.jsx("label",{className:"task-form-label",children:"Due Date"}),e.jsx("input",{type:"date",className:"task-input-field",id:"taskDueDate",name:"due_date",value:c.due_date,onChange:y})]}),e.jsxs("div",{className:"task-form-group",children:[e.jsx("label",{className:"task-form-label",children:"Attachments"}),e.jsxs("div",{style:{border:"2px dashed #cbd5e1",borderRadius:"8px",padding:"16px",textAlign:"center",cursor:"pointer",transition:"all 0.3s ease",backgroundColor:"#f8fafc"},children:[e.jsx("input",{type:"file",multiple:!0,onChange:Ce,style:{display:"none"},id:"fileInput",accept:"image/*,.pdf,.doc,.docx,.txt",disabled:f}),e.jsxs("label",{htmlFor:"fileInput",style:{cursor:f?"not-allowed":"pointer",display:"block",opacity:f?.6:1},children:[e.jsx(Re,{size:24,style:{margin:"0 auto 8px",color:"#7c3aed"}}),e.jsx("p",{style:{margin:"8px 0 4px",color:"#334155",fontWeight:"500"},children:"Click to upload or drag files"}),e.jsx("p",{style:{margin:"0",color:"#94a3b8",fontSize:"0.875rem"},children:"Images, PDF, DOC, TXT (Max 10MB each)"})]})]}),x.length>0&&e.jsxs("div",{style:{marginTop:"16px"},children:[e.jsxs("p",{style:{fontSize:"0.875rem",color:"#475569",marginBottom:"8px",fontWeight:"500"},children:["Current Attachments: ",x.length]}),x.some(s=>D(s))&&e.jsxs("div",{style:{marginBottom:"12px"},children:[e.jsx("p",{style:{fontSize:"0.75rem",color:"#64748b",marginBottom:"8px"},children:"Images:"}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(80px, 1fr))",gap:"8px"},children:x.filter(s=>D(s)).map(s=>e.jsxs("div",{style:{position:"relative",borderRadius:"6px",overflow:"hidden",border:"1px solid #e2e8f0",backgroundColor:"#f1f5f9"},children:[e.jsx("img",{src:s.fileUrl,alt:s.fileName,style:{width:"100%",height:"80px",objectFit:"cover"}}),e.jsx("button",{type:"button",onClick:()=>ee(s.id),style:{position:"absolute",top:"2px",right:"2px",background:"rgba(239, 68, 68, 0.9)",border:"none",color:"white",borderRadius:"50%",width:"20px",height:"20px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",padding:"0",fontSize:"12px"},title:`Remove ${s.fileName}`,children:"×"})]},s.id))})]}),x.some(s=>!D(s))&&e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:"0.75rem",color:"#64748b",marginBottom:"8px"},children:"Files:"}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:x.filter(s=>!D(s)).map(s=>e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"8px 12px",backgroundColor:"#f1f5f9",borderRadius:"6px",border:"1px solid #e2e8f0"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",minWidth:"0"},children:[e.jsx(fe,{size:18,style:{color:"#7c3aed",flexShrink:0}}),e.jsx("span",{style:{fontSize:"0.875rem",color:"#334155",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:s.fileName})]}),e.jsxs("div",{style:{display:"flex",gap:"4px",flexShrink:0},children:[e.jsx("a",{href:s.fileUrl,target:"_blank",rel:"noopener noreferrer",style:{background:"none",border:"none",cursor:"pointer",padding:"4px",color:"#3b82f6",display:"flex",alignItems:"center",flexShrink:0},title:"Download file",children:e.jsx(Ae,{size:16})}),e.jsx("button",{type:"button",onClick:()=>ee(s.id),style:{background:"none",border:"none",cursor:"pointer",padding:"4px",color:"#ef4444",display:"flex",alignItems:"center",flexShrink:0},title:"Remove file",children:e.jsx(ge,{size:16})})]})]},s.id))})]})]}),j.length>0&&e.jsxs("div",{style:{marginTop:"12px",paddingTop:"12px",borderTop:"1px solid #e2e8f0"},children:[e.jsxs("p",{style:{fontSize:"0.875rem",color:"#475569",marginBottom:"8px",fontWeight:"500"},children:["New Files to Upload: ",j.length]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:j.map((s,i)=>e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"8px 12px",backgroundColor:"#ecfdf5",borderRadius:"6px",border:"1px solid #d1fae5"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",minWidth:"0"},children:[G.isImageFile(s)?e.jsx(Me,{size:18,style:{color:"#10b981",flexShrink:0}}):e.jsx(fe,{size:18,style:{color:"#10b981",flexShrink:0}}),e.jsx("span",{style:{fontSize:"0.875rem",color:"#334155",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:s.name}),e.jsxs("span",{style:{fontSize:"0.75rem",color:"#6b7280"},children:["(",G.isImageFile(s)?"Image → images folder":"File → files folder",")"]})]}),e.jsx("button",{type:"button",onClick:()=>_e(i),style:{background:"none",border:"none",cursor:"pointer",padding:"4px",color:"#ef4444",display:"flex",alignItems:"center",flexShrink:0},title:"Remove file",children:e.jsx(ge,{size:16})})]},i))})]})]})]})}),e.jsxs("div",{className:"task-modal-footer",children:[e.jsx("button",{type:"button",className:"task-btn task-btn-cancel",onClick:E,disabled:f,children:"Cancel"}),e.jsx("button",{type:"button",className:"task-btn task-btn-primary",onClick:ne,disabled:f,style:{opacity:f?.6:1,cursor:f?"not-allowed":"pointer"},children:f?"Uploading...":_?m?"Save Subtask":"Save Task":m?"Add Subtask":"Add Task"})]})]})}),be&&e.jsx("div",{className:"task-modal-overlay",onClick:B,children:e.jsxs("div",{className:"task-modal",onClick:s=>s.stopPropagation(),style:{maxWidth:"400px",textAlign:"center"},children:[e.jsx("div",{className:"task-modal-header",style:{borderBottom:"none",justifyContent:"flex-end",padding:"12px 16px"},children:e.jsx("button",{className:"task-modal-close-btn",type:"button",onClick:B,"aria-label":"Close modal",children:"×"})}),e.jsxs("div",{className:"task-modal-body",style:{padding:"20px 32px 32px"},children:[e.jsx("div",{style:{width:"80px",height:"80px",margin:"0 auto 24px",borderRadius:"50%",background:"linear-gradient(135deg, rgba(124,58,237,0.1), rgba(124,58,237,0.05))",display:"flex",alignItems:"center",justifyContent:"center",border:"3px solid #7c3aed"},children:e.jsx("svg",{width:"40",height:"40",viewBox:"0 0 24 24",fill:"none",stroke:"#7c3aed",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("polyline",{points:"20 6 9 17 4 12"})})}),e.jsx("h2",{style:{fontSize:"1.5rem",color:"#0f172a",marginBottom:"12px",fontWeight:"600"},children:"Awesome!"}),e.jsxs("p",{style:{color:"#64748b",fontSize:"0.95rem",marginBottom:"28px"},children:[m?"Subtask":"Task"," successfully added to your list"]}),e.jsx("button",{type:"button",className:"task-btn task-btn-primary",onClick:B,style:{width:"100%",padding:"12px",fontSize:"1rem"},children:"Continue"})]})]})})]})}export{ls as default};
