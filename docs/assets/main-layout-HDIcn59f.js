import{u as g,r,j as s,L as p,O as f}from"./vendor_react-ByBjJ8Oe.js";import{A as h}from"./index-BZi0Xtwm.js";import"./vendor-DuPUYBON.js";import"./vendor_firebase-i8bcTDRB.js";const N=[{sortOrder:1,name:"Dashboard",icon:"",link:"/dashboard"},{sortOrder:8,name:"Tasks",icon:"",link:"/task"},{sortOrder:16,name:"Calendar",icon:"",link:"/calendar"},{sortOrder:24,name:"Users",icon:"",link:"/users"},{sortOrder:32,name:"Settings",icon:"",link:"/settings"},{sortOrder:99,name:"Logout",icon:"",action:"logout"}];function k({photoURL:i,name:l,size:a=80,bgColor:o="#667eea"}={}){return i||`https://ui-avatars.com/api/?name=${encodeURIComponent(l||"User")}&background=${o.replace("#","")}&color=fff&size=${a}`}function v({children:i}){const l=g(),[a,o]=r.useState(!1),[t,c]=r.useState(null),[O,d]=r.useState(null),[x,u]=r.useState(null);r.useEffect(()=>{const e=h.onAuthStateChanged(n=>{n?(c(n.displayName||n.email||"User"),d(n.email||""),u(n.photoURL||null)):(c(null),d(null),u(null))});return()=>e()},[]);const b=async()=>{try{await h.signOutUser(),l("/login")}catch(e){console.error("Logout failed:",e)}},j=()=>{o(!a)},m=()=>{o(!1)};return s.jsxs(s.Fragment,{children:[s.jsx("button",{className:`hamburger-btn ${a?"hamburger-open":""}`,onClick:j,"aria-expanded":a,"aria-label":a?"Close sidebar":"Open sidebar",children:s.jsx("i",{className:"bi bi-list"})}),a&&s.jsx("div",{className:"sidebar-overlay",onClick:m}),s.jsxs("aside",{className:`sidebar ${a?"sidebar-open":""}`,children:[s.jsxs("div",{className:"sidebar-header",children:[s.jsx("h2",{children:"Tasky"}),s.jsxs("div",{className:"user-profile",children:[s.jsx("div",{className:"user-avatar",children:s.jsx("img",{id:"userPhoto",src:k({photoURL:x,name:t||"User",size:80,bgColor:"#3498db"}),alt:"Profile"})}),s.jsx("div",{className:"user-info",children:s.jsx("h5",{id:"userName",children:t??"Loading..."})})]})]}),s.jsx("ul",{children:N.map(e=>s.jsx("li",{children:e.link?s.jsxs(p,{to:e.link,onClick:m,children:[e.icon&&s.jsx("span",{className:"material-icons",children:e.icon}),e.name]}):e.action==="logout"?s.jsxs("button",{onClick:b,className:"logout-btn",children:[e.icon&&s.jsx("span",{className:"material-icons",children:e.icon}),e.name]}):null},e.link||e.action))}),i]})]})}function y(){return s.jsxs("div",{className:"main-layout-container",children:[s.jsx(v,{}),s.jsx("main",{className:"main-content",children:s.jsx(f,{})})]})}export{y as default};
