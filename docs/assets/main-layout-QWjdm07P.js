import{u as g,r,j as e,L as f,O as N}from"./vendor_react-CrYXpBy-.js";import{A as h}from"./index-Dg82ZmQM.js";import"./vendor-DuPUYBON.js";import"./vendor_firebase-kU5F968d.js";const k=[{sortOrder:1,name:"Home",icon:"",link:"/"},{sortOrder:2,name:"Tasks",icon:"",link:"/task"},{sortOrder:3,name:"Calendar",icon:"",link:"/calendar"},{sortOrder:4,name:"Settings",icon:"",link:"/settings"},{sortOrder:5,name:"Logout",icon:"",action:"logout"}];function v({photoURL:i,name:o,size:a=80,bgColor:l="#667eea"}={}){return i||`https://ui-avatars.com/api/?name=${encodeURIComponent(o||"User")}&background=${l.replace("#","")}&color=fff&size=${a}`}function O({children:i}){const o=g(),[a,l]=r.useState(!1),[t,c]=r.useState(null),[x,d]=r.useState(null),[j,u]=r.useState(null);r.useEffect(()=>{const s=h.onAuthStateChanged(n=>{n?(c(n.displayName||n.email||"User"),d(n.email||""),u(n.photoURL||null)):(c(null),d(null),u(null))});return()=>s()},[]);const p=async()=>{try{await h.signOutUser(),o("/login")}catch(s){console.error("Logout failed:",s)}},b=()=>{l(!a)},m=()=>{l(!1)};return e.jsxs(e.Fragment,{children:[e.jsx("button",{className:`hamburger-btn ${a?"hamburger-open":""}`,onClick:b,"aria-expanded":a,"aria-label":a?"Close sidebar":"Open sidebar",children:e.jsx("i",{className:"bi bi-list"})}),a&&e.jsx("div",{className:"sidebar-overlay",onClick:m}),e.jsxs("aside",{className:`sidebar ${a?"sidebar-open":""}`,children:[e.jsxs("div",{className:"sidebar-header",children:[e.jsx("h2",{children:"Tasky"}),e.jsxs("div",{className:"user-profile",children:[e.jsx("div",{className:"user-avatar",children:e.jsx("img",{id:"userPhoto",src:v({photoURL:j,name:t||"User",size:80,bgColor:"#3498db"}),alt:"Profile"})}),e.jsxs("div",{className:"user-info",children:[e.jsx("h5",{id:"userName",children:t??"Loading..."}),e.jsx("p",{id:"userEmail",children:x??"Please wait..."})]})]})]}),e.jsx("ul",{children:k.map(s=>e.jsx("li",{children:s.link?e.jsxs(f,{to:s.link,onClick:m,children:[s.icon&&e.jsx("span",{className:"material-icons",children:s.icon}),s.name]}):s.action==="logout"?e.jsxs("button",{onClick:p,className:"logout-btn",children:[s.icon&&e.jsx("span",{className:"material-icons",children:s.icon}),s.name]}):null},s.link||s.action))}),i]})]})}function y(){return e.jsxs("div",{className:"main-layout-container",children:[e.jsx(O,{}),e.jsx("main",{className:"main-content",children:e.jsx(N,{})})]})}export{y as default};
